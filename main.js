(()=>{"use strict";class t{constructor(t){this.boardSize=t}generateBoard(){const t=document.createElement("table");t.classList.add("board");for(let e=0;e<this.boardSize;e+=1){const e=document.createElement("tr");e.classList.add("board__row");for(let t=0;t<this.boardSize;t+=1){const t=document.createElement("td");t.classList.add("board__col"),e.appendChild(t)}t.appendChild(e)}return t}insertBoardOnPage(t){document.getElementById("game-board").appendChild(t)}}class e{constructor(){this.stopButton=document.querySelector(".button__end"),this.startButton=document.querySelector(".button__start"),this.informerText=document.getElementById("informer"),this.hitPoints=document.getElementById("hit"),this.missPoints=document.getElementById("miss"),this.endGame=this.endGame.bind(this)}hangEventClickByCells(){document.getElementById("game-board").addEventListener("click",(t=>{t.target.classList.contains("board__col")&&this.beatHammer(),t.target.classList.contains("_active")&&this.addHitPoint(t.target)}))}beatHammer(){const t=document.querySelector(".board");t.classList.add("_click"),setTimeout((()=>{t.classList.remove("_click")}),150)}endGame(t){const e=document.querySelector("._active");e&&e.classList.remove("_active"),t?this.informer("Игра закончена. Отдохните и возвращайтесь в игру!"):this.informer("Гоблины ускользнули от вас. Попробуйте ещё раз!")}informer(t){this.informerText.textContent=t||""}addHitPoint(t){this.hitPoints.textContent=Number(this.hitPoints.textContent)+1,t.classList.remove("_active")}addMissPoint(){this.missPoints.textContent=Number(this.missPoints.textContent)+1}}class s{constructor(){this.mechanics=new e}showRandomGoblins(){const t=document.getElementsByClassName("board__col");this.intervalShowGoblins=setInterval((()=>{const e=this.generateRandomCell(this.boardSize),s=document.querySelector("._active");s&&(s.classList.remove("_active"),this.mechanics.addMissPoint(),"5"===this.mechanics.missPoints.textContent&&(this.mechanics.endGame(),clearInterval(this.intervalShowGoblins))),t[e].classList.add("_active")}),1e3)}generateRandomCell(){const t=document.querySelectorAll(".board__row").length,e=Math.floor(t**2);return Math.floor(Math.random()*(e-0))+0}}new class{constructor(n){this.board=new t(n),this.goblins=new s,this.mechanics=new e,this.start=this.start.bind(this)}init(){const t=this.board.generateBoard();this.board.insertBoardOnPage(t),this.mechanics.startButton.addEventListener("click",this.start),this.mechanics.stopButton.addEventListener("click",(t=>{this.mechanics.endGame(t),clearInterval(this.goblins.intervalShowGoblins),this.mechanics.startButton.addEventListener("click",this.start)}))}start(){clearInterval(this.goblins.intervalShowGoblins),this.goblins.showRandomGoblins(),this.mechanics.hangEventClickByCells(),this.mechanics.hitPoints.textContent=0,this.mechanics.missPoints.textContent=0,this.mechanics.informer(!1)}}(4).init()})();